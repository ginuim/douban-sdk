{"version":3,"sources":["../libs/douban.js"],"names":[],"mappings":";;;;;;;;;;mBAAgB,KAAK;;;;wBACD,UAAU;;;;oBACR,QAAQ;;IAAlB,IAAI;;qBACO,SAAS;;IAApB,KAAK;;AAEjB,IAAI,GAAG,GAAG,EAAE,CAAA;;AAEZ,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAA,QAAQ,EAAI;AACpC,KAAG,CAAC,QAAQ,CAAC,GAAG,qBACd,uBAAuB,EACvB,IAAI,CAAC,QAAQ,CAAC,EACd,KAAK,CAAC,QAAQ,CAAC,CAChB,CAAA;CACF,CAAC,CAGD;;;AAAA,CAAC,YAAM;AACN,MAAI,CAAC,GAAG,CAAC,EAAE,EACT,OAAM;;;AAGR,KAAG,CAAC,EAAE,CAAC,KAAK,GAAG,YAAiB;QAAhB,MAAM,yDAAG,EAAE;;AACzB,UAAM,CAAC,IAAI,GAAG,GAAG,CAAA;;AAEjB,QAAI,CAAC,MAAM,CAAC,OAAO,EACjB,OAAO,sBAAQ,MAAM,CAAC,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC,CAAA;;AAE/E,WAAO,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC;AAClB,QAAE,EAAE,MAAM;KACX,CAAC,CAAA;GACH,CAOA;;;;;;;AAAA,GAAC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,OAAO,CAAC,UAAA,IAAI,EAAI;AACxD,OAAG,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,YAAiB;UAAhB,MAAM,yDAAG,EAAE;;AACzB,UAAI,CAAC,MAAM,CAAC,OAAO,EACjB,OAAO,sBAAQ,MAAM,CAAC,IAAI,KAAK,CAAC,0CAA0C,CAAC,CAAC,CAAA;AAC9E,UAAI,CAAC,MAAM,CAAC,GAAG,EACb,OAAO,sBAAQ,MAAM,CAAC,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC,CAAA;;AAEvE,YAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;AAC5B,aAAO,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC;AAClB,UAAE,EAAE,MAAM;OACX,CAAC,CAAA;KACH,CAAA;GACF,CAAC,CAAA;CACH,CAAA,EAAG,CAAC;;qBAEU,GAAG","file":"douban.js","sourcesContent":["import SDK from 'sdk'\nimport Promise from 'bluebird'\nimport * as apis from './apis'\nimport * as rules from './rules'\n\nlet sdk = {}\n\nObject.keys(apis).forEach(catagory => {\n  sdk[catagory] = new SDK(\n    'http://www.douban.com', \n    apis[catagory], \n    rules[catagory]\n  )\n})\n\n// Init high level APIs for douban.fm\n;(() => {\n  if (!sdk.fm)\n    return\n\n  // n: new，没有歌曲播放，歌曲队列也没有任何歌曲，需要返回新播放列表\n  sdk.fm.fresh = (params = {}) => {\n    params.type = 'n'\n\n    if (!params.channel)\n      return Promise.reject(new Error('douban.fm.fresh(); channel_id is required'))\n\n    return sdk.fm.songs({\n      qs: params\n    })\n  }\n\n  // s: skip，歌曲正在播放，队列中还有歌曲，适用于用户点击下一首 with sid\n  // r: rate，歌曲正在播放，标记喜欢当前歌曲 with sid\n  // u: unrate，歌曲正在播放，标记取消喜欢当前歌曲 with sid\n  // b: bye，不再播放，并放回一个新的歌曲列表, with sid\n  // e: end，当前歌曲播放完毕，但是歌曲队列中还有歌曲. with sid\n  ;['skip', 'rate', 'unrate', 'bye', 'end'].forEach(item => {\n    sdk.fm[item] = (params = {}) => {\n      if (!params.channel)\n        return Promise.reject(new Error('douban.fm.skip(); channel_id is required'))\n      if (!params.sid)\n        return Promise.reject(new Error('douban.fm.skip(); sid is required'))\n\n      params.type = item.charAt(0)\n      return sdk.fm.songs({\n        qs: params\n      })\n    }\n  })\n})();\n\nexport default sdk\n"]}